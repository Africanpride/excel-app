'use strict';

var react = require('react');
var EmblaCarousel = require('embla-carousel');

function _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }

var EmblaCarousel__default = /*#__PURE__*/_interopDefaultLegacy(EmblaCarousel);

function canUseDOM() {
  return !!(typeof window !== 'undefined' && window.document && window.document.createElement);
}

function useEmblaCarousel(options, plugins) {
  if (options === void 0) {
    options = {};
  }

  if (plugins === void 0) {
    plugins = [];
  }

  var optionsHandler = react.useRef(EmblaCarousel__default["default"].optionsHandler());
  var storedOptions = react.useRef(options);
  var storedPlugins = react.useRef(plugins);

  var _a = react.useState(),
      embla = _a[0],
      setEmbla = _a[1];

  var _b = react.useState(),
      viewport = _b[0],
      setViewport = _b[1];

  react.useEffect(function () {
    if (canUseDOM() && viewport) {
      EmblaCarousel__default["default"].globalOptions = useEmblaCarousel.globalOptions;
      var newEmbla_1 = EmblaCarousel__default["default"](viewport, storedOptions.current, storedPlugins.current);
      setEmbla(newEmbla_1);
      return function () {
        return newEmbla_1.destroy();
      };
    } else {
      setEmbla(undefined);
    }
  }, [viewport, setEmbla]);
  react.useEffect(function () {
    if (!embla) return;
    if (optionsHandler.current.areEqual(storedOptions.current, options)) return;
    storedOptions.current = options;
    storedPlugins.current = plugins;
    embla.reInit(storedOptions.current, storedPlugins.current);
  }, [embla, options, plugins]);
  return [setViewport, embla];
}

useEmblaCarousel.globalOptions = undefined;

module.exports = useEmblaCarousel;
//# sourceMappingURL=embla-carousel-react.cjs.js.map
