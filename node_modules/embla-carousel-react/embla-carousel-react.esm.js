import { useRef, useState, useEffect } from 'react';
import EmblaCarousel from 'embla-carousel';

function canUseDOM() {
  return !!(typeof window !== 'undefined' && window.document && window.document.createElement);
}

function useEmblaCarousel(options, plugins) {
  if (options === void 0) {
    options = {};
  }

  if (plugins === void 0) {
    plugins = [];
  }

  var optionsHandler = useRef(EmblaCarousel.optionsHandler());
  var storedOptions = useRef(options);
  var storedPlugins = useRef(plugins);

  var _a = useState(),
      embla = _a[0],
      setEmbla = _a[1];

  var _b = useState(),
      viewport = _b[0],
      setViewport = _b[1];

  useEffect(function () {
    if (canUseDOM() && viewport) {
      EmblaCarousel.globalOptions = useEmblaCarousel.globalOptions;
      var newEmbla_1 = EmblaCarousel(viewport, storedOptions.current, storedPlugins.current);
      setEmbla(newEmbla_1);
      return function () {
        return newEmbla_1.destroy();
      };
    } else {
      setEmbla(undefined);
    }
  }, [viewport, setEmbla]);
  useEffect(function () {
    if (!embla) return;
    if (optionsHandler.current.areEqual(storedOptions.current, options)) return;
    storedOptions.current = options;
    storedPlugins.current = plugins;
    embla.reInit(storedOptions.current, storedPlugins.current);
  }, [embla, options, plugins]);
  return [setViewport, embla];
}

useEmblaCarousel.globalOptions = undefined;

export { useEmblaCarousel as default };
//# sourceMappingURL=embla-carousel-react.esm.js.map
